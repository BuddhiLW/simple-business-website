{"version":3,"sources":["playground/recipes/views/recipe_steps.cljs"],"mappings":"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","names":["p__50683","map__50684","cljs.core/--destructure-map","cljs.core.get","playground.recipes.views.recipe-steps/modal-step-editor","values","save","playground.components.modal/modal","js/module$node_modules$$mui$material$node$index.Grid","js/module$node_modules$$mui$material$node$index.FormControl","playground.components.form-group/form-group","cljs.core.get_in","cljs.core.js__GT_clj","js/module$node_modules$$mui$material$node$index.colors","temp__5804__auto__","step-id","cljs.core/deref","js/module$node_modules$$mui$material$node$index.Button","js/confirm","re-frame.core/dispatch","G__50687","playground.recipes.views.recipe-steps/recipe-steps","initial-values","reagent.core.atom","open-modal","p__50691","map__50692","modal-key","step","cljs.core/reset!","p__50694","map__50695","id","order","desc","clojure.string/blank?","or__5045__auto__","cljs.core.keyword","cljs.core/random-uuid","steps","re_frame.core.subscribe","author?","js/module$node_modules$$mui$material$node$index.Paper","js/module$node_modules$$mui$material$node$index.Typography","js/module$node_modules$$mui$material$node$index.IconButton","js/module$node_modules$$mui$icons_material$Create.default","iter__5523__auto__","s__50698","cljs.core/LazySeq","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","cljs.core/count","b__50700","cljs.core/chunk-buffer","i__50699","vec__50705","cljs.core/-nth","cljs.core.nth","map__50708","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__50697","cljs.core/chunk-rest","vec__50714","cljs.core/first","map__50717","cljs.core/cons","cljs.core/rest","index","cljs.core.map_indexed","i","m","js/module$node_modules$$mui$icons_material$DeleteOutline.default","cljs.core/chunk-first"],"sourcesContent":["(ns playground.recipes.views.recipe-steps\n  (:require\n   [\"@mui/icons-material/Create\" :default CreateIcon]\n   [\"@mui/icons-material/DeleteOutline\" :default DeleteOutlineIcon]\n   [\"@mui/material\" :refer [Button colors FormControl Grid IconButton Paper\n                            Typography]]\n   [clojure.string :as str]\n   [playground.components.form-group :refer [form-group]]\n   [playground.components.modal :refer [modal]]\n   [re-frame.core :as rf]\n   [reagent.core :as r]))\n\n(defn modal-step-editor\n  [{:keys [values save]}]\n  [modal {:modal-key :step-editor\n          :title \"Describe the step\"\n          :body\n          [:form\n           [:> Grid {:p 5\n                     :align-items \"center\"}\n            [:> FormControl  {:component \"fieldset\"\n                              :variant \"standard\"\n                              :fullWidth true\n                              :margin \"normal\"\n                              :size \"small\"}\n             [form-group {:id :desc\n                          :label \"Description\"\n                          :type \"text\"\n                          :text-area? true\n                          :values values}]]]]\n          :footer\n          [:> Grid {:display \"flex\"\n                    :flex-direction \"row\"\n                    :justify-content \"space-between\"\n                    :px 5\n                    :py 3\n                    :sx {:border-radius \"18px\"\n                         :box-shadow 10}\n                    :bgcolor (get-in (js->clj colors :keywordize-keys true) [:grey :100])}\n           (when-let [step-id (:id @values)]\n             [:> Button {:variant \"contained\"\n                         :color \"warning\"\n                         :on-click #(when (js/confirm \"Are you sure?\")\n                                      (rf/dispatch [:recipe/delete-step step-id]))}\n              \"Delete\"])\n           [:> Button {:variant \"contained\"\n                       :color \"warning\"\n                       :on-click #(rf/dispatch [:recipes/close-modal])}\n            \"Cancel\"]\n           [:> Button {:variant \"contained\"\n                       :color \"primary\"\n                       :on-click #(save @values)}\n            \"Save\"]]}])\n\n(defn recipe-steps []\n  (let [initial-values {:id nil\n                        :order \"\"\n                        :desc \"\"}\n        values (r/atom initial-values)\n        open-modal (fn [{:keys [modal-key step]}]\n                     (rf/dispatch [:recipes/open-modal modal-key])\n                     (reset! values step))\n        save (fn [{:keys [id order desc]}]\n               (when (not (str/blank? desc))\n                 (rf/dispatch [:recipe/save-step {:id (or (keyword id) (keyword (str \"step-\" (random-uuid))))\n                                                  :order order\n                                                  :desc desc}])\n                 (reset! values initial-values)))]\n    (fn []\n      (let [steps @(rf/subscribe [:recipe/steps])\n            author? @(rf/subscribe [:recipe/author?])]\n        [:> Grid {:item true\n                  :max-width \"100%\"\n                  :xs 6\n                  :sm 6\n                  :md 6\n                  :lg 7\n                  :xl 8}\n                  ;; :p 3\n                  ;; :m 2}\n         (when author?\n           [modal-step-editor {:values values\n                               :save save}])\n         [:> Paper {:variant \"outlined\"\n                    :sx {:min-width \"100%\"}}\n          [:> Grid {:container true\n                     ;; :xs 12\n                    ;; :direction \"row\"\n                    :align-items \"center\"}\n           [:> Grid {:item true\n                     :xs (if author? 11 12)\n                     :pb 0\n                     :align-items \"center\"}\n            [:> Typography {:variant \"h4\"\n                            :align \"center\"\n                            :font-weight 500\n                            :class-name \"text-slate-700\"}\n             \"Preparation\"]]\n           (when author?\n             [:> Grid {:item true\n                       :align-items \"center\"\n                       :xs 1}\n              [:> IconButton {:on-click #(open-modal {:modal-key :step-editor\n                                                      :step initial-values})}\n               [:> CreateIcon {:color \"primary\"\n                               :sx {:font-size \"2rem\"}}]]])\n           [:hr {:class-name \"w-full border-0 h-px my-2 bg-gray-200 dark:bg-gray-700\"}]]\n          (for [[index {:keys [id desc] :as values}] (map-indexed (fn [i m] [i m]) steps)]\n            ^{:key id}\n            [:<>\n             [:> Grid {:container true\n                       :direction \"row\"\n                        ;; :xs 12\n                       :justify-content \"space-between\"}\n              [:> Grid {:item true\n                        :xs 6\n                        :px 3}\n               [:> Typography {:variant \"h4\"\n                               :class-name \"text-slate-600\"} \"Step \" (inc index)]]\n              (when author?\n                [:> Grid {:item true\n                          :display \"flex\"\n                          :sx {:justify-content \"flex-end\"}\n                          :pr 4\n                          :xs 1}\n                 [:> IconButton {:on-click #(open-modal {:modal-key :step-editor\n                                                         :step values})}\n                  [:> CreateIcon {:color \"primary\"\n                                  :sx {:font-size \"2rem\"}}]]\n                 [:> IconButton {:on-click #(when (js/confirm \"Are you sure you want to delete?\")\n                                              (rf/dispatch [:recipe/delete-step id]))}\n                  [:> DeleteOutlineIcon {:color \"warning\"\n                                         :sx {:font-size \"2rem\"}}]]])]\n             [:hr {:class-name \"w-1/4 border-0 h-px my-2 bg-gray-200 dark:bg-gray-700\"}]\n             [:> Grid {:p 3}\n              [:> Typography\n               {:variant \"body1\"\n                :font-size \"1.2rem\"\n                :component \"p\"\n                :class-name \"text-slate-800\"}\n               desc]]])]]))))\n"]}